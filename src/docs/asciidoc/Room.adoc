= 방 도메인 API 문서
:doctype: book
:icons: font
:source-highlighter: highlightjs

== 방 생성 API

- 유저가 방을 생성하는 API입니다.
- userId, roomType, title 정보를 body에 담아서 요청합니다.
- 방은 대기(`WAIT`) 상태로 생성됩니다.
- 방의 데이터가 저장되는 시점에 따라 `createdAt` 과 `updatedAt` 을 저장합니다.
- 방을 생성한 사람을 호스트(`HOST`)라고 합니다.

=== ⚠️ 제한조건

* 유저(userId)의 상태가 활성(`ACTIVATE`)상태일 때만, 방을 생성할 수 있습니다.
- 유저 상태가 활성(`ACTIVATE`)이 아닐 경우, 잘못된 요청 처리(`BAD_REQUEST`) 처리를 합니다.
* 방을 생성하려고 하는 유저(userId)가 현재 참여한 방이 있다면, 방을 생성할 수 없습니다.
- 참여하고 있는 방이 있다면, 잘못된 요청 처리(`BAD_REQUEST`)처리를 합니다.

=== 방 생성 API 성공 시

=== `POST /rooms`

==== HTTP request

include::{snippets}/RoomControllerTest/createRoom_Success/http-request.adoc[]

==== Request fields

include::{snippets}/RoomControllerTest/createRoom_Success/request-fields.adoc[]

==== Http response

include::{snippets}/RoomControllerTest/createRoom_Success/http-response.adoc[]

==== Response fields

include::{snippets}/RoomControllerTest/createRoom_Success/response-fields.adoc[]

=== 방 생성 API 실패 시(유저가 활성 상태가 아닌 경우)

- 유저의 상태가 활성(`ACTIVATE`)이 아닐 경우, 잘못된 요청 처리(`BAD_REQUEST`) 처리를 합니다.

==== HTTP request

include::{snippets}/RoomControllerTest/createRoom_Fail_UserNotActivate/http-request.adoc[]

==== Request fields

include::{snippets}/RoomControllerTest/createRoom_Fail_UserNotActivate/request-fields.adoc[]

==== Http response

include::{snippets}/RoomControllerTest/createRoom_Fail_UserNotActivate/http-response.adoc[]

==== Response fields

include::{snippets}/RoomControllerTest/createRoom_Fail_UserNotActivate/response-fields.adoc[]

=== 방 생성 API 실패 시(유저가 이미 참여한 방이 있는 경우)

- 유저가 이미 참여한 방이 있는 경우, 잘못된 요청 처리(`BAD_REQUEST`) 처리를 합니다.

==== HTTP request

include::{snippets}/RoomControllerTest/createRoom_Fail_UserAlreadyJoined/http-request.adoc[]

==== Request fields

include::{snippets}/RoomControllerTest/createRoom_Fail_UserAlreadyJoined/request-fields.adoc[]

==== HTTP request

include::{snippets}/RoomControllerTest/createRoom_Fail_UserAlreadyJoined/http-response.adoc[]

==== Request fields

include::{snippets}/RoomControllerTest/createRoom_Fail_UserAlreadyJoined/response-fields.adoc[]

=== 방 생성 API 실패 시(서버 에러)

- 방 생성 시, 서버 에러가 발생한 경우, 서버 에러 처리(`INTERNAL_SERVER_ERROR`)를 합니다.

==== HTTP request

include::{snippets}/RoomControllerTest/createRoom_Fail_ServerError/http-request.adoc[]

==== Request fields

include::{snippets}/RoomControllerTest/createRoom_Fail_ServerError/request-fields.adoc[]

==== Http response

include::{snippets}/RoomControllerTest/createRoom_Fail/http-response.adoc[]

==== Response fields

include::{snippets}/RoomControllerTest/createRoom_Fail/response-fields.adoc[]

=== 방 전체 조회 API 성공 시

- page: 페이지 번호
- size: 한 페이지에 반환될 유저의 개수

=== `GET /rooms`

==== HTTP request

include::{snippets}/RoomControllerTest/findAllRoom_Success/http-request.adoc[]

==== Http response

include::{snippets}/RoomControllerTest/findAllRoom_Success/http-response.adoc[]

==== Response fields

include::{snippets}/RoomControllerTest/findAllRoom_Success/response-fields.adoc[]

==== 방 전체 조회 API 실패 시 (잘못된 페이지 및 사이즈 요청 시)

=== `GET /rooms`

==== HTTP request

include::{snippets}/RoomControllerTest/findAllRoom_BadRequest/http-request.adoc[]

=== Http response

include::{snippets}/RoomControllerTest/findAllRoom_BadRequest/http-response.adoc[]

=== Response fields

include::{snippets}/RoomControllerTest/findAllRoom_BadRequest/response-fields.adoc[]

=== 방 전체 조회 API 실패 시 (서버 에러)

=== `GET /rooms`

==== HTTP request

include::{snippets}/RoomControllerTest/findAllRoom_ServerError/http-request.adoc[]

==== Http response

include::{snippets}/RoomControllerTest/findAllRoom_ServerError/http-response.adoc[]

=== Response fields

include::{snippets}/RoomControllerTest/findAllRoom_ServerError/response-fields.adoc[]

=== 방 상세 조회 API 성공 시

=== `GET /rooms/{roomId}`

=== Path parameters

include::{snippets}/RoomControllerTest/findRoomDetail_Success/path-parameters.adoc[]

==== HTTP request

include::{snippets}/RoomControllerTest/findRoomDetail_Success/http-request.adoc[]

==== Http response

include::{snippets}/RoomControllerTest/findRoomDetail_Success/http-response.adoc[]

==== Response fields

include::{snippets}/RoomControllerTest/findRoomDetail_Success/response-fields.adoc[]

=== 방 상세 조회 API 실패 시 (존재하지 않는 방 조회 시)

=== `GET /rooms/{roomId}`

* 존재하지 않는 방을 조회하려고 하는 경우, 잘못된 요청 처리(`BAD_REQUEST`) 처리를 합니다.

==== Path parameters

include::{snippets}/RoomControllerTest/findRoomDetail_Fail_BadRequest/path-parameters.adoc[]

=== HTTP request

include::{snippets}/RoomControllerTest/findRoomDetail_Fail_BadRequest/http-request.adoc[]

=== Http response

include::{snippets}/RoomControllerTest/findRoomDetail_Fail_BadRequest/http-request.adoc[]

=== Response fields

include::{snippets}/RoomControllerTest/findRoomDetail_Fail_BadRequest/response-fields.adoc[]

=== 방 상세 조회 API 실패 시 (서버 에러)

=== `GET /rooms/{roomId}`

=== Path parameters

include::{snippets}/RoomControllerTest/findRoomDetail_Fail_ServerError/path-parameters.adoc[]

=== HTTP request

include::{snippets}/RoomControllerTest/findRoomDetail_Fail_ServerError/http-request.adoc[]

=== Http response

include::{snippets}/RoomControllerTest/findRoomDetail_Fail_ServerError/http-response.adoc[]

=== Response fields

include::{snippets}/RoomControllerTest/findRoomDetail_Fail_ServerError/response-fields.adoc[]
